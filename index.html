<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mobile PDF & Image Toolbox</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>
<style>
html, body { margin:0; padding:0; width:100%; font-family:Arial,sans-serif; background:#f9fafb; display:flex; flex-direction:column; align-items:center;}
header { background: linear-gradient(135deg, #4f46e5, #3b82f6); color:white; text-align:center; padding:1rem; width:100%; border-radius:0 0 1rem 1rem;}
main { width:100%; max-width:420px; padding:1rem; display:flex; flex-direction:column; gap:1rem;}
.card { background:white; border-radius:1rem; padding:1rem; box-shadow:0 4px 12px rgba(0,0,0,0.15); display:flex; flex-direction:column; gap:0.5rem;}
select,input,button { padding:0.75rem; border-radius:0.75rem; border:1px solid #d1d5db; font-size:1rem; width:100%; box-sizing:border-box;}
button { background: linear-gradient(135deg, #3b82f6, #2563eb); color:white; border:none; font-weight:bold; cursor:pointer; transition:0.3s;}
button:hover { background: linear-gradient(135deg, #2563eb, #1d4ed8);}
.file-list { display:flex; flex-wrap:wrap; gap:0.5rem; }
.thumb { width:80px; height:80px; object-fit:cover; border-radius:1rem; box-shadow:0 2px 6px rgba(0,0,0,0.1);}
.output-button { margin-top:0.5rem; }
</style>
</head>
<body>
<header>
  <h1>ðŸ“„ Mobile PDF & Image Toolbox</h1>
</header>
<main>
  <div class="card">
    <label for="operation">Choose Operation:</label>
    <select id="operation">
      <option value="images-to-pdf">Images â†’ PDF</option>
    </select>
    <input type="file" id="file-input" multiple>
    <div class="file-list" id="file-list"></div>
    <div style="display:flex; gap:0.5rem;">
      <button id="run-btn" style="flex:1;">Run</button>
      <button id="clear-btn" style="flex:1; background:#e5e7eb; color:#111;">Clear</button>
    </div>
    <div id="output"></div>
  </div>
</main>
<script>
const fileInput = document.getElementById('file-input');
const fileList = document.getElementById('file-list');
const runBtn = document.getElementById('run-btn');
const clearBtn = document.getElementById('clear-btn');
const output = document.getElementById('output');

let selectedFiles = [];

// Show image previews
fileInput.addEventListener('change', () => {
  selectedFiles = Array.from(fileInput.files);
  renderPreviews();
});

function renderPreviews() {
  fileList.innerHTML = '';
  selectedFiles.forEach(file => {
    if(file.type.startsWith('image/')){
      const img = document.createElement('img');
      img.src = URL.createObjectURL(file);
      img.className = 'thumb';
      fileList.appendChild(img);
    } else {
      const div = document.createElement('div');
      div.textContent = file.name;
      div.style.padding = '0.5rem';
      div.style.border = '1px solid #ddd';
      div.style.borderRadius = '1rem';
      fileList.appendChild(div);
    }
  });
}

// Clear button
clearBtn.addEventListener('click', () => {
  fileInput.value = '';
  selectedFiles = [];
  fileList.innerHTML = '';
  output.innerHTML = '';
});

// Create Redirect/Ad button
function createRedirectButton(filename){
  const btn = document.createElement('button');
  btn.textContent = `Download ${filename}`;
  btn.className = 'output-button';
  btn.onclick = () => {
    // Replace with your Adstera link
    window.open('https://www.revenuecpmgate.com/yctqzz5x?key=48d337eeabf24557dcf84e10aae6967e', '_blank');
  };
  return btn;
}

// Run button
runBtn.addEventListener('click', async () => {
  if(selectedFiles.length === 0) { alert('Please select images'); return; }
  
  // Clear previous output
  output.innerHTML = '';

  // Generate PDF
  const pdfDoc = await PDFLib.PDFDocument.create();
  for(let file of selectedFiles){
    const bytes = await file.arrayBuffer();
    let img;
    if(file.type === 'image/png') img = await pdfDoc.embedPng(bytes);
    else img = await pdfDoc.embedJpg(bytes);
    const page = pdfDoc.addPage([1080,1920]);
    page.drawImage(img, {x:0,y:0,width:1080,height:1920});
  }

  const pdfBytes = await pdfDoc.save();
  const blob = new Blob([pdfBytes], {type:'application/pdf'});

  // Show the redirect/download button
  const redirectBtn = createRedirectButton('output.pdf');
  output.appendChild(redirectBtn);
});
</script>
</body>
</html>
